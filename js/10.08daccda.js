(self["webpackChunkAnimeUI"]=self["webpackChunkAnimeUI"]||[]).push([[10],{14080:function(e,t,n){"use strict";n.a(e,(async function(e){var a=n(48534),o=n(95082),i=(n(35666),n(78830),n(56977),n(74916),n(64765),n(40561),n(41539),n(54747),n(92222),n(68309),n(69600),n(91038),n(78783),n(70189),n(33948),n(47042),n(56598)),l=n(42119),r=n(28157),s=n(51478),c=n(40541),d=n(91072),u=n(97400),p=n(14575),m=n(89745),f=n(23176),y=n(65490),g=n(93204),h=n(486),v=n(35583),b=e([g,c]);[g,c]=b.then?await b:b;var k="967",x=!0;t["Z"]=(0,i.defineComponent)({name:"player-region",inheritAttrs:!1,props:{animeTemp:Object,styles:{type:Object,default:{"epi-box-title":"播放列表"}},dlpOptions:{type:Object,default:{}}},components:{"aui-lzyplayer":c.Z,"danmaku-panel":p.Z,"aui-number-field":s.Z,"episode-box":d.Z},emits:{toggleVideo:function(e){return!0}},setup:function(e){var t=(0,i.getCurrentInstance)(),n=t.proxy,a=null===t||void 0===t?void 0:t.appContext.config.globalProperties.$magic,s=(a.actionQueue,(0,l.yj)()),c=(0,l.tv)(),d=(0,r.AW)(),p=(0,i.computed)((function(){return!e.animeTemp.isMobile&&d.width.value>k})),y=(0,i.reactive)({wideplay:!1,autoNext:!0,footerMsg:"弹幕库载入为空,修改搜索词试试~",offsetTime:0}),v=(0,i.reactive)({opacity:1,volume:.5,danmaku:1,autoplay:1,danmuArea:"default",orbitGap:6,speed:10,duration:5,fontsize:100,autoNext:!0,enableInnerDanmaku:!0}),b=new n.$Lycabinet("auiplayer-prefer",(0,o.Z)({autoload:!1,initStorage:v,autoNotifyTabs:!1},(0,g.VM)(a)));b._init(v),b.load({onceDone:function(){f.DEBUG&&console.log("[AuiSettings]: Query start to parser"),c.isReady().then((function(){var e=s.query;for(var t in e){var n=!1;switch(t){case"innerDanmaku":v.enableInnerDanmaku=!("false"===e[t]),n=!0;break}if(n)break}}))}});var x=null,w=null,D=null;(0,i.onMounted)((function(){D=n.$refs.lzyplayer,w=D.dlpWrap,x=D.dlpIns,f.DEBUG&&(window["lzyplayer"]=D),f.DEBUG&&(window["dlpWrap"]=w),f.DEBUG&&(window["dlpIns"]=x)})),(0,i.watch)((function(){return v}),(function(e,t){f.DEBUG&&console.log("[player-region]: AuiPlayer Preference is changed!"),b.lazySave()}),{deep:!0}),(0,i.onBeforeMount)((function(){(0,i.watchEffect)((function(){v.autoNext=y.autoNext})),(0,i.watchEffect)((function(){n.danmakuStatue.enable=v.enableInnerDanmaku,n.danmakuStatue.enable||(y.footerMsg='<span class="text-grey">内置弹幕库已经禁用</span>')}))})),(0,i.onMounted)((function(){(0,i.nextTick)((function(){(0,i.watchEffect)((function(){w.danmuStyle({orbitGap:v.orbitGap})})),(0,i.watchEffect)((function(){w.danmuStyle({scrollSpeed:v.speed})})),(0,i.watchEffect)((function(){w.danmuStyle({fixedDuration:v.duration})})),(0,i.watch)((function(){return v.fontsize}),(function(e,t){var n=(v.fontsize/100*1.25).toFixed(2)+"rem";w.danmuStyle({fontsize:n})})),(0,i.watchEffect)((function(){f.DEBUG&&console.log("设定了弹幕偏移！"),w.danmuStyle({offsetTime:y.offsetTime})})),(0,i.watchEffect)((function(){var e=x.container;y.wideplay?e.classList.add("dlp-screen-widen"):e.classList.remove("dlp-screen-widen"),(0,i.nextTick)((function(){x.resize()}))}))}))}));var E=(0,m.deepAssign)({video:{defaultQuality:0,type:"auto",topbar:{title:!0,meta:!0},currentPath:"",quality:[{name:"1080P",url:"",type:"auto"}]}},{danmaku:{bottom:"36px",addition:[]},storageMode:"outer",settingStorage:v,hotkeyProxy:!0});Object.assign(E,e.dlpOptions);var V=(0,i.reactive)({title:"",cover:"",description:"",category:[],danmaku:{search:"",addition:[]}}),N=function(e){var t,a,o,i,l,r=null===(t=V.danmaku)||void 0===t?void 0:t.search;((0,m.objectRefresh)(V,(0,m.deepClone)(e)),f.DEBUG&&console.log({rawDanmakuSearch:r,configs:(0,m.deepClone)(e),animeMeta:(0,m.deepClone)(V),comparison:r!==(null===(a=V.danmaku)||void 0===a?void 0:a.search),comparisonTwo:-1===[h.$,r].indexOf(null===(o=V.danmaku)||void 0===o?void 0:o.search)}),n.danmakuStatue.enable&&-1===[h.$,r].indexOf(null===(i=V.danmaku)||void 0===i?void 0:i.search))&&n.grabDanmaku(null===(l=e.danmaku)||void 0===l?void 0:l.search,!0)},B=(0,i.reactive)([]),S=function(e){B.splice(0,B.length),e.forEach((function(e,t){(0,m.is_Number)(e.id)||(e.id=t),B.push(e)}))},_=(0,i.reactive)({listTitle:"",episodeId:-1,name:"",danmuList:[],isPrepared:!1}),z=(0,u.S)({$magic:a,videoPlaying:_,animeMeta:V,playList:B,playerRegion:n}),M=[];(0,i.onMounted)((function(){a.utils.addToInterface((function(e){var t=e.invoke;e.invoke=function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];t.apply(void 0,[x].concat(n))},a.utility.registerShortcut(e),M.push((function(){a.utility.unregisterShortcut(e.name,!0)}))}),"addPlayerHotkey"),a._trigger("auiplayer-mounted",M)})),(0,i.onUnmounted)((function(){while(M.length)M.pop()(n);a._resetCounter("auiplayer-mounted"),a._trigger("auiplayer-unmounted"),a.utils.removeInInterface("addPlayerHotkey")}));var L=function(e){y.footerMsg="弹幕库".concat(e?"已成功加载":"加载失败,更换搜索词试试")},P=function(e,t){y.footerMsg=e?'弹幕集匹配成功: <span class="text-success">'.concat(t.name,"</span>"):'<span class="text-warning">弹幕集匹配失败，请调整配置或手动选择</span>'};return a._on("danmakuLoaded",L),a._on("danmuMatch",P),(0,i.onUnmounted)((function(){a._off("danmakuLoaded",L),a._off("danmuMatch",P)})),a.utils.addToInterface((function(e){var t=e(x),n=["orbitGap","playWaitDanmu"];try{for(var a in t)switch(a){case n[0]:v.orbitGap=parseFloat(t[a])||8;break;case n[1]:n[1]&&function(){var e=function(){x.pause()},t=function(){x.play()};x._on("danmaku_load_start",e),x._on("danmaku_load_end",t),M.push((function(){x._off("danmaku_load_start",e),x._off("danmaku_load_end",t)}))}();break}}catch(o){console.error("The returns should be an Object with optional prop in ".concat(n.join(",")),o)}}),"auiplayerDepthSet"),(0,o.Z)((0,o.Z)({display:d,need_Rollbox_Show:p,AuiSettings:v,videoPlaying:_,animeMeta:V,playingList:B,toolbar:y,toUnmounted:M,initRegionMeta:N,initPlaylist:S,dlplayerOptions:E,getDlpIns:function(){return x},getDlpWrap:function(){return w},getLzyplayer:function(){return D}},z),{},{panelDanmaku:(0,i.reactive)({show:!1,isAddition:!1})})},computed:{},methods:{playIt:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark((function n(){var a,o,i,l,r,s,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.index,o=e.preplay,i=e.postplay,l=e.alterOption,r=t.videoPlaying,s=t.playingList[~~a],r.episodeId=s.id,r.name=s.name,c={title:t.animeMeta.title,name:s.name,src:s.src,type:s.type,topbar:{title:s.name,meta:"#".concat(1+~~a," / ").concat(t.playingList.length)},quality:s.quality||null},n.next=8,l(c,s);case 8:return o&&(c.preplay=function(e,n){var i={dlpIns:n,dlpWrap:e,lzyplayer:t.$refs.lzyplayer,playerRegion:t,playingList:t.playingList,index:a};o(i),t.toolbar.offsetTime=0,t.toolbar.footerMsg="正在播放: ".concat(s.name)}),i&&(c.postplay=function(e,n){var o,l={dlpIns:n,dlpWrap:e,lzyplayer:t.$refs.lzyplayer,playerRegion:t,playingList:t.playingList,index:a};null!==(o=s.danmaku)&&void 0!==o&&o.address?t.applyDanmu(s.danmaku):t.applyDanmu({address:""}),(0,m.is_Defined)(s.subtitle)&&((0,m.is_String)(s.subtitle)?e.applySubtitle({url:s.subtitle}):e.applySubtitle(s.subtitle)),i(l)}),n.next=12,t.$refs.lzyplayer.lzyplay(c);case 12:case"end":return n.stop()}}),n)})))()},toPlaynext:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this.playingList.length,o=this.$refs.episodeBox.playingIndex,i=(a+o+(n?-1:1))%a,l=this.$refs.episodeBox.listPlaying,r=l[i].id;this.$emit("toggleVideo",r,{preplay:function(){e.notice("正在播放：".concat(t.playingList[i].name),{priority:2})}})},toEnded:function(e){f.DEBUG&&x&&console.log("LockTest, toEnded!"),this.canPlaynext&&this.toolbar.autoNext?(this.toPlaynext(e),this.canPlaynext=!1,f.DEBUG&&x&&console.log("LockTest, have played next!")):e.pause()},toTimeupdate:function(e){var t=this,n=5,a=e.video,o=a.currentTime,i=a.duration;if(!this.toolbar.autoNext||this.lockNotice||!i||i<2*n||o+n+.5<i||o+n-.5>i)return!0;f.DEBUG&&x&&console.log("LockTest, have entered timeupdate!"),this.lockNotice=!0;var l=this.$refs.episodeBox.playingIndex,r=this.playingList.length,s=(r+l+1)%r,c=this.$refs.episodeBox.listPlaying,d=c[s].id,u=new Function,p=0===d?"已达最末P了，循环播放ing":"即将播放下一P：".concat(this.playingList[s].name);e.notice(p,{cancelText:"取消",time:1e3*(n+1)-300,default:"",cancel:function(){f.DEBUG&&x&&console.log("LockTest, have clicked the noctice cancel!"),u(),t.canPlaynext=!1,t.lockNotice=!1},action:function(a){f.DEBUG&&x&&console.log("LockTest, have fired once notice action with countDown!"),(0,y.i7)({count:n+1,action:function(e,n){t.lockNotice&&!t.canPlaynext||(a.innerHTML=p+'<span class="text-primary">（'.concat(e,"s）</span>"),u=n)},done:function(){f.DEBUG&&x&&console.log("LockTest, countDown is ended!"),t.canPlaynext?(f.DEBUG&&x&&console.log("LockTest, countDown Ended with success play next!"),t.toPlaynext(e,!1),t.canPlaynext=!1):t.canPlaynext=!0,t.lockNotice=!1}})},priority:2})},toLoadstart:function(){f.DEBUG&&console.log("[PlayerRegion]: loadstart triggered"),this.lockNotice||(this.canPlaynext=!0)},applyDanmu:function(e){var t,n=this.videoPlaying.danmuList=[e.address].concat((0,m.is_Array)(e.addition)?e.addition:[]);n=Array.from(new Set(n)),e.address=n[0]||"",e.addition=n.slice(1),e.address&&(this.toolbar.footerMsg='<span class="text-primary">已注入来自'.concat((0,v.getHostName)(e.address),"的弹幕;</span>")+this.toolbar.footerMsg),null!==(t=e.addition)&&void 0!==t&&t.length&&(this.toolbar.footerMsg='<span class="text-secondary">合并了'.concat(e.addition.length,"条弹幕;</span>")+this.toolbar.footerMsg),this.$refs.lzyplayer.dlpWrap.applyDanmu(e)},contactDanmu:function(e){for(var t in e.addition=(0,m.arbitraryWrap)(e.addition||[]),e.bullets=(0,m.arbitraryWrap)(e.bullets||[]),f.DEBUG&&console.log("[lzyplayer]: Executed Danmu Contact",e),e.addition)this.videoPlaying.danmuList.push(e.addition[t]);this.$refs.lzyplayer.dlpWrap.contactDanmu(e),e.addition.length&&(this.toolbar.footerMsg='<span class="text-secondary">合并了'.concat(e.addition.length,"个弹幕源;</span>")+this.toolbar.footerMsg),e.bullets.length&&(this.toolbar.footerMsg='<span class="text-secondary">合并了'.concat(e.addition.length,"条弹幕;</span>")+this.toolbar.footerMsg)},openDanmakuPanel:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.danmakuStatue.enable)return this.$magic.utility.lzydialog({title:"Hint",content:"内置弹幕库已禁用，点击确定启用。请确保与Anime-API通信顺畅。",actions:[{text:"确定",semantic:"success",action:function(){e.AuiSettings.enableInnerDanmaku=!0,e.toolbar.footerMsg='<span class="text-success">内置弹幕库及自动匹配启用成功！</span>'}},{text:"取消",semantic:"none"}],semantic:"warning"}),!1;t?(this.panelDanmaku.show=!0,this.panelDanmaku.isAddition=!0):(this.panelDanmaku.show=!0,this.panelDanmaku.isAddition=!1)}},beforeMount:function(){},mounted:function(){var e=this,t=this.$magic.utils.addToInterface;t((function(t){var n={},a=["loadListData","toggleMetaList","toggleVideo"];a.forEach((function(t){n[t]=(0,m.getExportMethod)(e.$parent,t)}));var o=["contactDanmu","applyDanmu"];o.forEach((function(t){n[t]=(0,m.getExportMethod)(e,t)}));var i=["danmuStyle","toggleDanmu","speedShift","mute","focusIt","applySubtitle"],l=e.getDlpWrap();i.forEach((function(e){n[e]=(0,m.getExportMethod)(l,e)})),t(e.$refs.lzyplayer.dlpIns,n)}),"auiplayer");var n=this.display.platform.value;n.chrome,f.DEBUG&&(window["playerRegion"]=this)},unmounted:function(){}})}))},97400:function(e,t,n){"use strict";n.d(t,{S:function(){return f}});n(74916),n(64765),n(41539);var a=n(65490),o=n(89745),i=n(56598),l=(n(92222),n(2707),n(15306),n(54747),n(47042),n(68309),n(4723),n(21249),n(23176)),r=n(71153),s=!0;l.DEBUG&&(window["ZH_HardToNums"]=r.k);var c={bilibili:1/24,tencent:1/36,iqiyi:1/36},d=function(e,t){var n,a=t.title,o=t.episodeNum;return n=m(e,a,(function(e,t,n){o+""===e.num+""?n+=~~(Math.log(o+1)*(o-Math.abs(e.num-o))):n+=~~(o-Math.abs(e.num-o)),l.DEBUG&&s&&console.log("集数对称差加权结果：",n);var a=e.module.slice(1+e.module.lastIndexOf("."));for(var i in c)if(i===a){n+=Math.abs(~~(c[i]*n));break}return l.DEBUG&&s&&console.log("信赖源加权结果：",n),n})),n.sort((function(e,t){return t.mark-e.mark}))},u=function(e,t){l.DEBUG&&console.log({danmaku:e,matchInstruction:t});var n=t.name,a=(t.episodeNum,/第?(.+?)[集话节画卷章]/),o=/(?:OVA.+)|(?:SP.+)|(?:PV.+)/i,i=/(?:\[.+?\])|(?:【.+?】)/g;n=n.replace(i,""),n=(0,r.k)(n,!0);var s=n.match(a),c=n.match(o),d=parseInt(p(n)),u=Object.create(null);if(s){var f;l.DEBUG&&console.log("[lzyplayer]: 进入集数标识子集匹配; resultOne",s);for(var y=0;y<e.length;y++){if(e[y].name.indexOf(s[0])>-1)return l.DEBUG&&console.log("[lzyplayer]: 集数标识子集匹配成功;id: ".concat(y,",name: ").concat(e[y].name)),y;if(f=e[y].name.match(a),f&&parseFloat(f[1])===parseFloat(s[1]))return l.DEBUG&&console.log("[lzyplayer]: 集数标识双向正则匹配成功;id: ".concat(y,",name: ").concat(e[y].name)),y;if(u[y]||(u[y]=parseFloat(p(e[y].name))),parseFloat(s[1])===parseFloat(u[y]))return l.DEBUG&&console.log("[lzyplayer]: 集数标识数字数值匹配成功;id: ".concat(y,",name: ").concat(e[y].name)),y}}else if(c){l.DEBUG&&console.log("[lzyplayer]: 进入关键字子集匹配; resultTwo",c);for(var g=0;g<e.length;g++){if(e[g].name.indexOf(c[0])>-1)return l.DEBUG&&console.log("[lzyplayer]: 关键字子集匹配成功;id: ".concat(g,",name: ").concat(e[g].name)),g;if(u[g]||(u[g]=parseFloat(p(e[g].name))),parseFloat(c[1])===u[g])return l.DEBUG&&console.log("[lzyplayer]: 精确数字匹配成功;id: ".concat(g,",name: ").concat(e[g].name)),g}}else{if(!d){var h,v=0,b=e.map((function(e){return{title:e.name,num:e.name.length}}));return h=m(b,n),h.sort((function(e,t){return t.mark-e.mark})),l.DEBUG&&console.log("[lzyplayer]: 字符模糊相似排序匹配成功;id: ".concat(h[v].id,",name: ").concat(h[v].data.name)),h[v].id}l.DEBUG&&console.log("[lzyplayer]: 进入模糊数字匹配; playingTitleNumbers: ".concat(d));for(var k=0;k<e.length;k++)if(u[k]||(u[k]=parseFloat(p(e[k].name))),u[k]===d)return l.DEBUG&&console.log("[lzyplayer]: 模糊数字匹配成功;id: ".concat(k,",name: ").concat(e[k].name)),k}return-1};function p(e){var t="",n="";e=(0,r.k)(e,!0);for(var a=0;a<e.length;a++)n=e[a],isNaN(n)&&"."!==n||(t+=n);return t}function m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return e.map((function(e,a,o){e.id=a;for(var i=0,r=-1,c=-1,d=0;d<t.length;d++)r=e.title.slice(d).indexOf(t[d])+d,r>-1&&(c+1===r?i+=4:c<r?i+=2:c>r&&(i+=1)),c=r;return l.DEBUG&&s&&console.log("字符连续相似搜索匹配结果：",i),i+=t.length-Math.abs(e.title.length-t.length)*Math.log(t.length),l.DEBUG&&s&&console.log("标题长度对称差加权结果：",i),n&&(i=n(e,t,i)),{mark:i,id:a,data:o[a]}}))}function f(e){var t=(0,i.ref)([]),n=(0,i.reactive)({loading:!0,search:"",enable:!0});(0,i.onUnmounted)((function(){e.$magic._resetCounter("danmakuLoaded")}));var r=function(n){var a=e.animeMeta.title,o=e.playList,i={title:a,episodeNum:o.length},l=d(n,i);t.value=l},s=new Function,c=function(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return l.DEBUG&&console.log("搜索了弹幕：",a),n.enable?(0,o.is_Empty)(e.playList)&&!c?(e.$magic.utility.lzydialog({title:"视频轨道为空",content:"请先载入视频播放列表！"}),!1):a?(n.search=a,n.loading=!0,void this.$magic.http.get("/danmaku/search/"+a).then((function(c){var d=c.data;if((0,o.is_Empty)(d)||!(0,o.is_Object)(d))return t.$magic.utility.lzynotice({content:"弹幕库为空或加载弹幕库失败",semantic:"error",position:"center",duration:10}),n.loading=!1,Promise.reject("The grabbed data is vacant with Searching word: ".concat(a));s(),s=(0,i.watchEffect)((function(){e.playList&&(r(d),l.DEBUG&&console.log("The sort mark of danmaku is re-calculated!"))})),n.loading=!1,t.$magic._trigger("danmakuLoaded",!0)})).catch((function(e){n.loading=!1,r([]),console.error(e),t.$magic._trigger("danmakuLoaded",!1)}))):(l.DEBUG&&console.log("Danmaku Search is Vacant!"),r([]),!1):(e.$magic.utility.lzydialog({title:"内置弹幕库已禁用",content:"请先启用内置弹幕库并确保与API通讯畅通"}),!1)},p=function(t,n){var o=u(t,n);if(o>-1){var i=e.videoPlaying.danmuList,l={address:(0,a.ay)(t[o].url,"/",2)+"v3/?",addition:i};e.playerRegion.applyDanmu(l),e.$magic._trigger("danmuMatch",!0,t[o])}else e.$magic.utility.lzynotice({content:"自动匹配弹幕失败，请手动选择",semantic:"warning",position:"center",duration:9}),e.$magic._trigger("danmuMatch",!1)},m=function n(a){var i=this;if((0,o.is_Object)(t.value[0])&&!(0,o.curveGet)(t.value,[0,"danmus"]))return f(0).then((function(e){e===t.value[0]?p.call(i,e.danmus,a):n(a)})).catch((function(e){console.error(e)})),!0;if(t.value[0]){var r=(0,o.curveGet)(t.value,[0,"danmus"]);return p.call(this,r,a),!0}l.DEBUG&&console.log("[Details]: Danmu applying is blocked cause the danmaku is not loaded!",(0,o.deepClone)(t.value),t.value);var s="danmakuLoaded";return e.$magic._isHappened(s)||e.$magic._once(s,(function(){Promise.resolve().then((function(){n(a)}))}),!0),!1},f=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!n.enable)return l.DEBUG&&console.log("内置弹幕库已禁用，取消自动匹配"),Promise.reject("Danmaku is disabled");var i=t.value[a];if(!i)return l.DEBUG&&console.error("所选弹幕源不存在！",{id:a,danmakuList:t.value}),Promise.reject("Danmaku is not existed");var r=(0,o.curveGet)(i,["data","url"]);return e.$magic._isHappened("danmakuLoaded")?(n.loading=!0,new Promise((function(t,a){e.$magic.http(r).then((function(e){var a=e.data;return(0,o.curveSet)(i,["danmus"],a),n.loading=!1,t(i),i})).catch((function(e){n.loading=!1,a(e)}))}))):(l.DEBUG&&console.log("[Details]: Danmu applying is blocked cause the danmaku is not loaded!"),e.$magic.utility.lzynotice({content:"动作太快啦，请先让弹幕君缓缓！",position:"side",semantic:"info"}),Promise.reject("Danmaku is loading"))};return{danmakuStatue:n,danmakuList:t,grabDanmaku:c,grabDanmakuDetails:f,calcCurrentMatch:r,startToMatchDanmu:m}}},91816:function(e,t,n){"use strict";n.a(e,(async function(e){n.d(t,{N:function(){return m}});var a=n(95082),o=(n(41539),n(40561),n(68309),n(74916),n(64765),n(54747),n(92222),n(56598)),i=n(5450),l=n.n(i),r=n(93204),s=n(89745),c=n(65490),d=n(23176),u=e([r]);r=(u.then?await u:u)[0];var p=!0;function m(e,t){var n=e._self,i=e.getDlpIns,u=e.$magic,m=u.actionQueue,f=t.playingListHostName,y=t.limit||-1,g=new(l())(t.rootName,(0,a.Z)({initStorage:{historylist:[]},deepMerge:!0,customMerge:(0,c.$L)("title")},(0,r.VM)(u)));d.DEBUG&&(window["cab-"+t.rootName]=g);var h=null,v=null,b=[],k=function(){d.DEBUG&&console.log("[PlayerHistory]: Recorder have stopped!"),b.forEach((function(e){var t=u.utility.lzynotice(e,!0);d.DEBUG&&!t&&console.log("clear notice failed key:".concat(e.content))})),b.splice(0,b.length),m.revoke(-1,(function(e){t.rootName})),h&&h._off("pause",v)},x=function a(){d.DEBUG&&console.log("[PlayerHistory]: Recorder setup！");var o=e.animeMeta,i=g.get("historylist")||(g.__storage.historylist=[]),l=o.title;if(!l)return d.DEBUG&&console.log("[Playing-History]: runtimeKey is empty!",o),m.bubble((function(){a()}),5),!1;for(var r=0;r<i.length;r++)if(i[r].title===l)break;var k=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(h.video.paused&&!e)return!1;var a=g.get("historylist"),i=n.$refs[f],c=i.videoPlaying,u=n.playing,m={title:l,name:c.name,line:u.listIndex,epi:u.epiIndex,time:~~h.video.currentTime,date:(0,s.dateFormatter)("yy-MM-dd HH:mm:ss"),danmus:o.danmaku.danmuList||[],danmakuSearch:o.danmaku.search};t.extendRecords&&t.extendRecords.forEach((function(e){switch(e){case"url":m[e]=n.$route.params.animeID;break;case"eng":m[e]=o.module;break;case"cover":m[e]=o.cover;break}})),a[r]=m,y>0&&a.length>y&&a.splice(a.length-1,a.length-y),(0,s.moveArrayItem)(a,r,0),r=0,d.DEBUG&&p&&console.log("完成了一次历史记录采样",m,a,r),g.save()};m.registerHook({name:t.rootName+"_save",loop:!0,once:!0,debounce:!0,action:k}),m.bubble(t.rootName+"_save",-1),v=(0,s.throttle)(k,1e3),h._on("pause",v);var x=i[r],w=function(e){var a=n.multiMeta,o=-1,i=-1,r=!0;if("name"===t.matchMode||"mixed"===t.matchMode){for(o=0;o<a.length;o++)if(a[o].title===l)break;a[o]||(r=!1);var c=a[o].playList;for(i=0;i<c.length;i++)if(x.name===c[i].name)break;c[i]||(r=!1),r||("mixed"===t.matchMode&&(0,s.is_Object)(c[x.epi])?i=x.epi:u.utility.lzynotice({content:"播放列表变更，未找到对应记录！",semantic:"error"}))}else i=x.epi,o=x.line;if(!r||(0,s.is_Empty)(a[o])||!(0,s.is_Defined)(a[o].playList[i]))return d.DEBUG&&console.log("Unable to recordFind the proper history record, The history match mode is: ".concat(t.matchMode)),!1;var p=n.multiMeta[x.line];Promise.resolve().then((function(){p.playing.danmakuSearch=x.danmakuSearch})),n.toggleListVideo(o,i,{postplay:function(e){console.info("Post play with context",e),e.dlpIns.seek(~~x.time)}})},D=function(){var e='style="color:#eaf;cursor:pointer;font-weight:bold;"',t=u.utility.lzynotice({content:"上次观看『<span ".concat(e,">").concat(i[r].name,"</span>』至 <span ").concat(e,">").concat((0,c.gk)(i[r].time),"</span>"),position:"side",duration:0,semantic:"info",match:"span",onMatched:w,onMissed:w});b.push(t)};(0,s.is_Defined)(x)?Promise.resolve().then((function(){D()})):d.DEBUG&&console.log("没有找到符合的历史记录")};return(0,o.onMounted)((function(){h=i()})),(0,o.onUnmounted)((function(){k(),m.unregisterHook(t.rootName+"_save"),g.destroy(!1)})),{recorderSetup:x,stopRecorder:k}}}))},71153:function(e,t,n){"use strict";n.d(t,{k:function(){return c}});n(26699),n(32023),n(69600),n(92222);var a=n(23176),o=!1,i=["〇零","一壹","二贰","三叁","四肆","五伍","六陆","七柒","八捌","九玖"],l=20,r=["十拾","百佰","千仟","万萬"],s=function(e,t){for(var n=t.length-1;n>=0;n--)if(t[n].includes(e))return n;return n},c=function(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=i.join("")+r.join(""),c=(i.concat(r),n.length),d=0;d<e.length;d++){for(var u=-1,p=c-1;p>=0;p--)if(n[c-p-1]===e[d]){u=c-p-1;break}if(!(u<0)){var m=0,f=-1,y=-1,g=d;do{for(var h=c-1;h>=0;h--)if(n[c-h-1]===e[d]){u=c-h-1;break}if(u<0)break;u<2||(u<l?(f=s(e[d],i),y=s(e[d+1],r),y>-1&&d++,m+=f*Math.pow(10,y+1)):u<c&&(f=s(e[d],r),m+=Math.pow(10,f+1))),d++,u=-1}while(d<e.length);var v=m+"";if(!t)return v;a.DEBUG&&o&&console.log({sentence:e,rstToStr:v,startPosition:g,id:d}),e=e.substring(0,g)+v+e.substring(d)}}return e}},14575:function(e,t,n){"use strict";n.d(t,{Z:function(){return P}});n(74916),n(64765),n(47042),n(56977),n(68309);var a=n(56598),o=n(52653),i=n(46769),l=n(1956),r=n(165),s=n(72595),c={class:(0,a.normalizeClass)(["select-step","select-addition"])},d=(0,a.createElementVNode)("span",{class:"step-tag"},"1",-1),u=(0,a.createElementVNode)("hr",{class:"v-divider"},null,-1),p=(0,a.createElementVNode)("span",{class:"step-tag"},"2",-1),m=(0,a.createElementVNode)("span",null,"当前番目弹幕",-1),f=[p,m],y={class:"select-body"},g={class:"body-content"},h={key:"0"},v=(0,a.createTextVNode)("mdi-refresh"),b=["onClick","data-id"],k={class:"ml-2 danmaku-engine"},x={class:"ml-2 danmaku-mark"},w={key:"0"},D=["onClick"],E={class:"mr-2",style:{display:"inline-block",color:"#21acff"}},V={class:(0,a.normalizeClass)(["select-footer","select-addition"])},N=(0,a.createTextVNode)("Close"),B=(0,a.createElementVNode)("div",{style:{flex:"1 1 auto"}},null,-1);function S(e,t){return(0,a.openBlock)(),(0,a.createElementBlock)("div",{class:(0,a.normalizeClass)(["danmaku-select layout resp-width-popup bg-background","select-step-".concat(e.step)])},[(0,a.createElementVNode)("div",c,[(0,a.withDirectives)(((0,a.openBlock)(),(0,a.createElementBlock)("div",{class:(0,a.normalizeClass)(["step-one",{"step-active":0===e.step}]),onClick:t[0]||(t[0]=function(t){return e.step=0})},[d,(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(e.isAddition?"合并弹幕源":"选择弹幕源"),1)],2)),[[s.H]]),u,(0,a.createElementVNode)("div",{class:(0,a.normalizeClass)(["step-two",{"step-active":1===e.step}])},f,2)]),(0,a.createElementVNode)("div",y,[(0,a.createVNode)(l.K,{active:e.danmakuStatue.loading,indeterminate:e.danmakuStatue.loading,color:"deep-purple accent-4"},null,8,["active","indeterminate"]),(0,a.createElementVNode)("div",g,[(0,a.createElementVNode)("div",{class:(0,a.normalizeClass)(["content-step content-step-one",{"step-content-active":0===e.step||e.danmakuStatue.loading}])},[(0,a.createVNode)(r.h,{onKeyup:t[1]||(t[1]=(0,a.withKeys)((function(t){return e.$emit("grabDanmaku",e.danmakuStatue.search,!0)}),["enter"])),small:"","hide-details":"auto",density:"compact",modelValue:e.danmakuStatue.search,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.danmakuStatue.search=t}),"aria-autocomplete":"off",autocomplete:"off","prepend-inner-icon":"mdi-text-box-search-outline"},null,8,["modelValue"]),(0,a.createElementVNode)("ul",null,[(0,a.createElementVNode)("li",h,[(0,a.createElementVNode)("span",null,"共找到 "+(0,a.toDisplayString)(e.danmakuList.length)+" 个弹幕源",1),(0,a.createVNode)(o.T,{title:"刷新",size:"x-small",icon:"",color:"transparent",onClick:t[3]||(t[3]=function(t){return e.$emit("grabDanmaku","")})},{default:(0,a.withCtx)((function(){return[(0,a.createVNode)(i.t,null,{default:(0,a.withCtx)((function(){return[v]})),_:1})]})),_:1})]),((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.danmakuList,(function(t,n){return(0,a.openBlock)(),(0,a.createElementBlock)("li",{key:-n,onClick:(0,a.withModifiers)((function(t){return e.selected.danmakuId=n}),["stop"]),class:(0,a.normalizeClass)([{selected:n===e.selected.danmakuId}]),"data-id":n},[(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(t.data.title),1),(0,a.createElementVNode)("code",k,(0,a.toDisplayString)(t.data.module.slice(t.data.module.lastIndexOf(".")+1,t.data.module.length-1)),1),(0,a.createElementVNode)("span",x,"Mark: "+(0,a.toDisplayString)(t.mark.toFixed(0)),1)],10,b)})),128))])],2),e.danmakuList[e.selected.danmakuId]&&e.danmakuList[e.selected.danmakuId].danmus?((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:0,class:(0,a.normalizeClass)(["content-step content-step-two",{"step-content-active":1===e.step&&!e.danmakuStatue.loading}])},[(0,a.createElementVNode)("ul",null,[(0,a.createElementVNode)("li",w,"共找到 "+(0,a.toDisplayString)(e.danmakuList[e.selected.danmakuId].danmus.length)+" 条弹幕集",1),((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.danmakuList[e.selected.danmakuId].danmus,(function(t,n){return(0,a.openBlock)(),(0,a.createElementBlock)("li",{key:n,class:(0,a.normalizeClass)([{selected:n===e.selected.danmuId}]),onClick:function(t){return e.selected.danmuId=n}},[(0,a.createElementVNode)("span",E,"标题"+(0,a.toDisplayString)(n+1)+"：",1),(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(t.name),1)],10,D)})),128))])],2)):(0,a.createCommentVNode)("",!0)])]),(0,a.createElementVNode)("div",V,[(0,a.createVNode)(o.T,{onClick:t[4]||(t[4]=function(t){return e.show=!1})},{default:(0,a.withCtx)((function(){return[N]})),_:1}),B,(0,a.createVNode)(o.T,{onClick:e.goto,color:e.isAddition?"quaternary":"primary",disabled:e.danmakuStatue.loading},{default:(0,a.withCtx)((function(){return[(0,a.createTextVNode)((0,a.toDisplayString)(0===e.step?"Next":e.isAddition?"合并":"确定"),1)]})),_:1},8,["onClick","color","disabled"])])],2)}var _=n(23176),z=(0,a.defineComponent)({props:{danmakuList:Array,danmakuStatue:Object,show:Boolean,isAddition:Boolean},inheritAttrs:!1,emits:{"update:show":function(e){return!0},grabDanmaku:function(e){return!0},grabDanmakuDetails:function(e){return!0},applyDanmu:function(e){return!0},contactDanmu:function(e){return!0}},setup:function(e,t){var n=t.emit,o=(0,a.getCurrentInstance)(),i=o.proxy,l=i.$magic,r=(0,a.ref)(0),s=(0,a.reactive)({danmakuId:0,danmuId:0});l._on("danmuMatch",(function(t,n){if(t)for(var a=0;a<e.danmakuList.length;a++)if(e.danmakuList[a].name===n.name){s.danmuId=a;break}}));var c=(0,a.computed)({get:function(){return e.show},set:function(e){return n("update:show",e)}}),d=function(){if(r.value++,1!==r.value){if(2===r.value){var t=e.danmakuList[s.danmakuId],a=t.danmus[s.danmuId];e.isAddition?(_.DEBUG&&console.log("当前为合并模式，执行了弹幕合并"),n("contactDanmu",{addition:[a.data]})):n("applyDanmu",{address:a.data})}else _.DEBUG&&console.error("step控制异常！");r.value--,c.value=!1}else n("grabDanmakuDetails",s.danmakuId)};return{step:r,goto:d,show:c,selected:s}}}),M=(n(61369),n(83744));const L=(0,M.Z)(z,[["render",S]]);var P=L},91072:function(e,t,n){"use strict";n.d(t,{Z:function(){return z}});n(47042),n(68309);var a=n(56598),o=n(46769),i={class:"episode-box"},l={class:"episode-box-header"},r={class:"episode-header-left"},s=(0,a.createTextVNode)("mdi-playlist-play"),c={class:"episode-header-right"},d={class:"episode-progress"},u=["data-balloon"],p=(0,a.createTextVNode)(" mdi-sort-descending "),m=(0,a.createTextVNode)(" mdi-sort-alphabetical-descending "),f=(0,a.createTextVNode)(" mdi-sort-ascending "),y=(0,a.createTextVNode)(" mdi-sort-variant "),g=["data-index","title"],h={key:0},v=(0,a.createTextVNode)("mdi-play"),b={key:1},k={key:2},x={key:0,class:"episode-item singleline-omit",style:{"pointer-events":"none"}};function w(e,t){return(0,a.withDirectives)(((0,a.openBlock)(),(0,a.createElementBlock)("div",i,[(0,a.createElementVNode)("div",l,[(0,a.createElementVNode)("span",r,[(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(e.styles.title),1),(0,a.createVNode)(o.t,{title:"点击定位",onClick:e.locatePlaying},{default:(0,a.withCtx)((function(){return[s]})),_:1},8,["onClick"])]),(0,a.createElementVNode)("span",c,[(0,a.createElementVNode)("span",d,(0,a.toDisplayString)(("00"+(e.playingIndex+1)).slice(-(e.listPlaying.length+"").length))+"/"+(0,a.toDisplayString)(e.listPlaying.length),1),(0,a.createElementVNode)("span",{onClick:t[0]||(t[0]=function(t){return++e.haveSorted}),id:"episode-sort","data-balloon":1===e.haveSorted?"当前：升序排列":2===e.haveSorted?"当前：降序排列":3===e.haveSorted?"原序逆排":"当前：默认排序","data-balloon-pos":"down"},[1===e.haveSorted?((0,a.openBlock)(),(0,a.createBlock)(o.t,{key:0,"tag-title":"当前：升序排列",color:"primary"},{default:(0,a.withCtx)((function(){return[p]})),_:1})):2===e.haveSorted?((0,a.openBlock)(),(0,a.createBlock)(o.t,{key:1,"tag-title":"当前：降序排列",color:"secondary"},{default:(0,a.withCtx)((function(){return[m]})),_:1})):3===e.haveSorted?((0,a.openBlock)(),(0,a.createBlock)(o.t,{key:2,"tag-title":"当前：原序逆排",color:"tertiary"},{default:(0,a.withCtx)((function(){return[f]})),_:1})):((0,a.openBlock)(),(0,a.createBlock)(o.t,{key:3,"tag-title":"当前：默认排序"},{default:(0,a.withCtx)((function(){return[y]})),_:1}))],8,u)])]),(0,a.createElementVNode)("ul",{class:"episode-box-body",onClick:t[1]||(t[1]=function(){return e.toggleToVideo&&e.toggleToVideo.apply(e,arguments)}),ref:"container"},[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.listPlaying,(function(t,n){return(0,a.openBlock)(),(0,a.createElementBlock)("li",{key:n,"data-index":t.id,title:t.name,class:(0,a.normalizeClass)(["episode-item singleline-omit",{"episode-active":t.id===e.videoPlaying.episodeId}])},[t.id===e.videoPlaying.episodeId?((0,a.openBlock)(),(0,a.createElementBlock)("span",h,[(0,a.createVNode)(o.t,{color:"#00a1d6",style:{display:"inline-block","margin-top":"-5px","vertical-align":"bottom"}},{default:(0,a.withCtx)((function(){return[v]})),_:1})])):(0,a.createCommentVNode)("",!0),isNaN(t.name)?((0,a.openBlock)(),(0,a.createElementBlock)("span",b,(0,a.toDisplayString)(t.name),1)):((0,a.openBlock)(),(0,a.createElementBlock)("span",k,(0,a.toDisplayString)("『 "+t.name+" 番目』"),1))],10,g)})),128)),e.listPlaying.length?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createElementBlock)("li",x," 播放列表为空，试试添加吧！ "))],512)],512)),[[a.vShow,e.need_Rollbox_Show]])}n(2707),n(74916),n(15306);var D=n(35583),E=n(71153),V=n(89745),N=n(42119),B=(0,a.defineComponent)({name:"episodeBox",props:{playingList:Array,need_Rollbox_Show:Boolean,videoPlaying:Object,styles:{type:Object,default:{title:"选集"}}},emits:{toggleVideo:function(e){return!0}},setup:function(e,t){var n=t.emit,o=(0,a.getCurrentInstance)(),i=o.proxy,l=(0,N.tv)(),r=(0,N.yj)(),s=(0,a.ref)(0),c=(0,a.computed)((function(){s.value>3&&(s.value=0);var t=e.playingList;return 1===s.value||2===s.value?t.sort((function(e,t){var n="name";return e=e[n].replace(/(.*?)第([^集话节画卷章]+?)[集话节画卷章]([^\d]*?)([\d]*?)(.*?)/g,"$2$1$4$3$5"),t=t[n].replace(/(.*?)第([^集话节画卷章]+?)[集话节画卷章]([^\d]*?)([\d]*?)(.*?)/g,"$2$1$4$3$5"),e=(0,E.k)(e,!0),t=(0,E.k)(t,!0),2===s.value?-(parseInt(e)-parseInt(t)):~~(parseInt(e)-parseInt(t))})):3===s.value?t.sort((function(e,t){return-(e.id-t.id)})):t.sort((function(e,t){return~~(e.id-t.id)}))}));(0,a.onMounted)((function(){l.isReady().then((function(){r.query.order&&(s.value=~~("true"===r.query.order)||~~r.query.order)}))}));var d=(0,a.computed)((function(){var t,n=null===(t=e.videoPlaying)||void 0===t?void 0:t.episodeId;if(n<0)return-1;for(var a=c.value,o=0;o<a.length;o++)if(n===a[o].id)break;if(o>=a.length)throw new Error("Unknow playing error with index of list: ".concat(o));return m(),o})),u=(0,D.getEventDelegate)((function(e,t){var a=t.dataset["index"]||0;n("toggleVideo",~~a),p(d.value)}),".episode-item",3),p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=i.$refs.container,n=t.children[~~e];(0,D.lyscrollTo)({scrollBox:t,target:n,offsetTop:-36,highlight:n})},m=(0,V.debounce)((function(){p(d.value)}),1024),f=new Function;return l.isReady().then((function(){s.value=~~(r.query&&r.query.sort),f=(0,a.watchEffect)((function(){l.replace({query:{sort:s.value}})}))})),(0,a.onUnmounted)((function(){f()})),{haveSorted:s,playingIndex:d,listPlaying:c,toggleToVideo:u,locateItem:p,locatePlaying:m}}}),S=(n(72726),n(83744));const _=(0,S.Z)(B,[["render",w]]);var z=_},38979:function(e,t,n){"use strict";n.a(e,(async function(e){var a=n(59408),o=n(62390),i=(n(29737),n(83744)),l=e([o]);o=(l.then?await l:l)[0];const r=(0,i.Z)(o.Z,[["render",a.s]]);t["Z"]=r}))},51478:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var a=n(95082),o=(n(9653),n(89745)),i=n(56598),l=(0,i.defineComponent)({name:"aui-number-field",props:{modelValue:{type:Number,default:0},modelModifiers:{default:function(){return{}}},step:{type:Number,default:1},disabled:{type:Boolean,default:!1},validate:{type:Function,default:function(){return!0}},styles:{type:Object,default:{}},attributes:{type:Object,default:{}}},emits:{"update:modelValue":function(e){return!0}},setup:function(e,t){t.attrs,t.slots;var n=t.emit,l=function(t){t=parseFloat(t),(0,o.is_Number)(t)||(t=0),e.modelModifiers.round&&(t=~~t);var a=e.validate(t);a&&n("update:modelValue",t)};l(e.modelValue);var r=(0,i.ref)(null),s=function(t){var n=e.modelValue-0+e.step*(2*~~t-1);l(n),(0,i.nextTick)((function(){r.value.dispatchEvent(new Event("change"))}))},c=function(e){var t=e.target.value;l(t)};return function(){return(0,i.h)("div",{class:"aui-input-number"},[(0,i.h)("lable",{disabled:e.disabled,onClick:function(e){return s(!1)}},[(0,i.h)((0,i.resolveComponent)("v-icon"),{},(function(){return"mdi-minus"}))]),(0,i.h)("input",(0,a.Z)({type:"text",ref:r,disabled:e.disabled,value:e.modelValue,onInput:c,onKeydown:function(e){"ArrowUp"===e.key||38===e.code?s(!0):"ArrowDown"!==e.key&&40!==e.code||s(!1)}},e.attributes)),(0,i.h)("lable",{disabled:e.disabled,class:"aui-label-right",onClick:function(e){return s(!0)},"data-postfix":e.styles.postfix||null},[(0,i.h)((0,i.resolveComponent)("v-icon"),{},(function(){return"mdi-plus"}))])])}}});n(81682);const r=l;var s=r},78830:function(e,t,n){"use strict";var a=n(82109),o=n(14230),i=n(43429);a({target:"String",proto:!0,forced:i("fontsize")},{fontsize:function(e){return o(this,"font","size",e)}})},52566:function(e,t,n){"use strict";n.r(t);var a=n(8081),o=n.n(a),i=n(23645),l=n.n(i),r=l()(o());r.push([e.id,"#aui-popup .danmaku-select.resp-width-popup.layout{margin-top:3%;min-width:18em;max-width:21em;min-height:21em;display:flex;flex-direction:column;height:70%;width:28%}#aui-popup .danmaku-select{pointer-events:all;border-radius:var(--v-layer-md-radius)}#aui-popup .danmaku-select .select-step{flex:0 0 auto;position:relative;display:flex;justify-content:space-between;align-items:stretch;height:4.5em;box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}#aui-popup .danmaku-select .select-step .step-tag{width:1.5em;height:1.5em;min-width:1.5em;transition:.3s cubic-bezier(.25,.8,.25,1);color:rgb(var(--v-theme-surface));background:rgba(var(--v-grey),1);border-radius:50%;margin-right:.25em;display:inline-flex;align-items:center;font-size:1rem;justify-content:center}#aui-popup .danmaku-select .select-step .step-active .step-tag{background:rgba(var(--v-theme-primary),1)}#aui-popup .danmaku-select .select-step>div{flex:1 1 auto;padding:0 1.25em;display:flex;justify-content:center;align-items:center}#aui-popup .danmaku-select .select-step .step-one{cursor:pointer}#aui-popup .danmaku-select .select-step .v-divider{position:absolute;left:50%;top:50%;width:18%;margin-left:-11.5%}#aui-popup .danmaku-select .select-body{flex:1 1 auto;max-height:calc(100% - 8em);display:flex;flex-direction:column;flex-grow:1}#aui-popup .danmaku-select .select-body .body-content{padding:.75em 1.25em 1.5em;height:100%;flex-grow:1;display:flex;flex-direction:column}#aui-popup .danmaku-select .select-body .body-content .content-step{padding:.5em .25em;display:none;overflow-y:scroll}#aui-popup .danmaku-select .select-body .body-content .content-step.step-content-active{display:block;flex-grow:1}#aui-popup .danmaku-select .select-body .body-content .content-step ul li{margin-bottom:.375em;list-style:none;padding:0 .5em;border-radius:var(--v-layer-sm-radius)}#aui-popup .danmaku-select .select-body .body-content .content-step ul li:first-child{display:flex;justify-content:space-between;align-items:center}#aui-popup .danmaku-select .select-body .body-content .content-step ul li:not(:first-child){font-size:.875rem;cursor:pointer}#aui-popup .danmaku-select .select-body .body-content .content-step ul li:not(:first-child):hover{background:#add8e6}#aui-popup .danmaku-select .select-body .body-content .content-step ul li:not(:first-child).selected{background:rgba(var(--v-theme-background),1)}#aui-popup .danmaku-select .select-body .body-content .content-step ul li:not(:first-child).selected:hover{background:rgba(var(--v-theme-background),calc(var(--v-hover-opacity) + .4))}#aui-popup .danmaku-select .select-body .body-content .content-step-one ul li{padding:.375em .625em}#aui-popup .danmaku-select .select-body .body-content .content-step-one ul li .danmaku-engine{display:inline-block;padding:.2em .4em .1em;background:#4b4b4b;color:#ffe246}#aui-popup .danmaku-select .select-body .body-content .content-step-one ul li .danmaku-mark{color:rgb(var(--v-theme-primary))}#aui-popup .danmaku-select .select-body .body-content .content-step-one .v-input .v-input__details,#aui-popup .danmaku-select .select-body .body-content .content-step-one .v-input .v-input__prepend{display:none}#aui-popup .danmaku-select .select-body .body-content .content-step-one .v-input .v-input__control .v-field__field .v-field__input{padding-top:0;padding-bottom:var(--v-field-padding-top,8px)}#aui-popup .danmaku-select .select-body .body-content .content-step-two ul li:first-child{color:rgb(var(--v-pink))}#aui-popup .danmaku-select .select-footer{display:flex;justify-content:space-around;align-items:center;height:3.5em;padding:1em 1.25em 2.25em}#aui-popup .danmaku-select .select-footer>button{flex:0 1 auto}.dark-token .danmaku-select .select-body .body-content .content-step{background-color:#444;border-color:#444}",""]),t["default"]=r},51894:function(e,t,n){"use strict";n.r(t);var a=n(8081),o=n.n(a),i=n(23645),l=n.n(i),r=l()(o());r.push([e.id,".episode-box{padding:0 .375em;border-radius:var(--v-layer-sm-radius);background:#f4f4f4;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.episode-box .episode-box-header{padding:0 .75em;height:2.625em;line-height:2.625em;border-bottom:1px dashed rgb(var(--v-grey));font-weight:400;display:flex;justify-content:space-between;flex-wrap:nowrap;align-items:center}.episode-box .episode-box-header i{text-indent:.4em}.episode-box .episode-box-header .episode-header-left i{color:#00a1d6;cursor:pointer}.episode-box .episode-box-header .episode-header-right{display:flex;justify-content:space-between;align-items:center}.episode-box .episode-box-header .episode-header-right .episode-progress{font-size:.75rem;padding-top:.375em;color:rgb(var(--v-grey))}.episode-box .episode-box-header #episode-sort{cursor:pointer}.episode-box .episode-box-body{padding:.625em .375em;max-height:22em;min-height:3.5em;overflow-x:hidden;overflow-y:scroll}.episode-box .episode-box-body li.episode-item{margin-bottom:.5em;padding:.5em .625em;color:#222;font-size:.75rem;border-radius:var(--v-layer-sm-radius);transition:background .3s linear;cursor:pointer;list-style:none}.episode-box .episode-box-body li.episode-item>*{vertical-align:middle}.episode-box .episode-box-body li.episode-item.episode-active{background:rgb(var(--v-theme-background),calc(var(--v-layer-opacity) + .2));color:#21acff}.episode-box .episode-box-body li.episode-item:hover{background:rgb(var(--v-theme-background),var(--v-layer-opacity));color:rgb(var(--v-theme-on-background))}.dark-token .episode-box{background:#202020}.dark-token .episode-box .episode-box-body li.episode-item{color:#ddd}",""]),t["default"]=r},78649:function(e,t,n){"use strict";n.r(t);var a=n(8081),o=n.n(a),i=n(23645),l=n.n(i),r=l()(o());r.push([e.id,".lzyplayer-container .lzyplayer-wrap{display:flex;flex-wrap:nowrap;justify-content:space-between;align-content:center;align-items:center;margin:5px auto 46px;width:100%}.lzyplayer-container .lzyplayer-wrap #lzyplayer{flex:3 1 70%}.lzyplayer-container .lzyplayer-wrap .episode-box{min-width:188px;margin-left:2.5em;flex:1 1 25%}.lzyplayer-container .lzyplayer-wrap.lzyplayer-wideplay #lzyplayer{margin-left:1.25em;margin-right:1.25em}.lzyplayer-container .lzyplayer-wrap.lzyplayer-wideplay #lzyplayer.lzyplayer-iframe{margin:0}.lzyplayer-container .lzyplayer-wrap.lzyplayer-wideplay .episode-box{display:none}.lzyplayer-container .player-terminal .terminal-danmu-header{display:flex;justify-content:space-between;align-items:center}.lzyplayer-container .player-terminal .terminal-danmu-header span:last-child{display:flex;align-items:center}.lzyplayer-container .player-terminal .terminal-danmu{display:flex;flex-wrap:wrap;justify-content:space-between;align-content:center}.lzyplayer-container .player-terminal .terminal-danmu>div{margin-bottom:.375em;display:flex;align-items:center;flex:1 1 50%}",""]),t["default"]=r},46651:function(e,t,n){"use strict";n.r(t);var a=n(8081),o=n.n(a),i=n(23645),l=n.n(i),r=l()(o());r.push([e.id,".aui-input-number{display:flex}.aui-input-number input{margin:0 .25em;padding:0 .25em;width:3.25em;border:1px solid rgb(var(--v-grey));border-radius:var(--v-layer-sm-radius);color:rgb(var(--v-theme-on-background))}.aui-input-number label{border:1px solid rgb(var(--v-lightgrey));border-radius:var(--v-layer-sm-radius)}.aui-input-number input+label{color:red}.aui-input-number .aui-label-right:before,.aui-input-number input+label:before{content:attr(data-postfix)}",""]),t["default"]=r},62390:function(e,t,n){"use strict";n.a(e,(async function(e){n.d(t,{Z:function(){return a.Z}});var a=n(14080),o=e([a]);a=(o.then?await o:o)[0]}))},29737:function(e,t,n){"use strict";n(96925)},61369:function(e,t,n){var a=n(52566);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);var o=n(54402).Z;o("dc892658",a,!0,{sourceMap:!1,shadowMode:!1})},72726:function(e,t,n){var a=n(51894);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);var o=n(54402).Z;o("65c24182",a,!0,{sourceMap:!1,shadowMode:!1})},96925:function(e,t,n){var a=n(78649);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);var o=n(54402).Z;o("37d90d9f",a,!0,{sourceMap:!1,shadowMode:!1})},81682:function(e,t,n){var a=n(46651);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);var o=n(54402).Z;o("fdf8c164",a,!0,{sourceMap:!1,shadowMode:!1})},59408:function(e,t,n){"use strict";n.d(t,{s:function(){return D}});n(92222),n(78830);var a=n(56598),o=n(46769),i=n(76924),l={class:"lzyplayer-container"},r={class:"player-terminal"},s={class:"terminal-danmu-header"},c=(0,a.createElementVNode)("span",null,"弹幕调节",-1),d=(0,a.createTextVNode)("启用内置弹幕 "),u={class:"border-md rounded-circle","data-balloon":"弹幕库由Anime-API驱动",style:{display:"inline-block","line-height":"1.25em"}},p=(0,a.createTextVNode)("mdi-information-variant"),m={class:"terminal-danmu"},f={class:"danmu-offset"},y=(0,a.createElementVNode)("label",null,"校准弹幕时间偏移:",-1),g={class:"danmu-fontsize"},h=(0,a.createElementVNode)("label",null,"弹幕字体大小",-1),v={class:"danmu-scroll-speed"},b=(0,a.createElementVNode)("label",null,"弹幕滚动速度",-1),k={class:"danmu-fixed-duration"},x=(0,a.createElementVNode)("label",null,"固定弹幕持续时间",-1),w=(0,a.createElementVNode)("div",{class:"dlb-full"},null,-1);function D(e,t){var n=(0,a.resolveComponent)("aui-lzyplayer"),D=(0,a.resolveComponent)("episode-box"),E=(0,a.resolveComponent)("danmaku-panel"),V=(0,a.resolveComponent)("aui-number-field");return(0,a.openBlock)(),(0,a.createElementBlock)("section",l,[(0,a.createElementVNode)("div",{class:(0,a.normalizeClass)(["lzyplayer-wrap",{"lzyplayer-wideplay":e.toolbar.wideplay}])},[(0,a.createVNode)(n,{ref:"lzyplayer",animeTemp:e.animeTemp,dlplayerConfigs:e.dlplayerOptions,toolbar:e.toolbar,onPlaynext:e.toPlaynext,onEnded:e.toEnded,onTimeupdate:e.toTimeupdate,onLoadstart:e.toLoadstart,onOpenSelect:t[0]||(t[0]=function(t){return e.openDanmakuPanel(!1)}),onOpenAddition:t[1]||(t[1]=function(t){return e.openDanmakuPanel(!0)})},null,8,["animeTemp","dlplayerConfigs","toolbar","onPlaynext","onEnded","onTimeupdate","onLoadstart"]),(0,a.withDirectives)((0,a.createVNode)(D,{ref:"episodeBox",playingList:e.playingList,videoPlaying:e.videoPlaying,need_Rollbox_Show:e.need_Rollbox_Show,styles:{title:e.styles["epi-box-title"]},onToggleVideo:t[2]||(t[2]=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];e.$emit.apply(e,["toggleVideo"].concat(n))})},null,8,["playingList","videoPlaying","need_Rollbox_Show","styles"]),[[a.vShow,e.need_Rollbox_Show]])],2),((0,a.openBlock)(),(0,a.createBlock)(a.Teleport,{to:"#aui-popup"},[(0,a.withDirectives)((0,a.createVNode)(E,{ref:"danmakuPenel",show:e.panelDanmaku.show,"onUpdate:show":t[3]||(t[3]=function(t){return e.panelDanmaku.show=t}),isAddition:e.panelDanmaku.isAddition,danmakuStatue:e.danmakuStatue,danmakuList:e.danmakuList,onGrabDanmaku:t[4]||(t[4]=function(){return e.grabDanmaku.apply(e,arguments)}),onGrabDanmakuDetails:t[5]||(t[5]=function(){return e.grabDanmakuDetails.apply(e,arguments)}),onApplyDanmu:t[6]||(t[6]=function(){return e.applyDanmu.apply(e,arguments)}),onContactDanmu:t[7]||(t[7]=function(){return e.contactDanmu.apply(e,arguments)})},null,8,["show","isAddition","danmakuStatue","danmakuList"]),[[a.vShow,e.panelDanmaku.show]])])),(0,a.createElementVNode)("div",r,[(0,a.createElementVNode)("h4",s,[c,(0,a.createElementVNode)("span",null,[(0,a.createElementVNode)("span",null,[d,(0,a.createElementVNode)("span",u,[(0,a.createVNode)(o.t,null,{default:(0,a.withCtx)((function(){return[p]})),_:1})])]),(0,a.createVNode)(i.G,{"hide-details":"",inset:"",color:"primary",modelValue:e.AuiSettings.enableInnerDanmaku,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.AuiSettings.enableInnerDanmaku=t})},null,8,["modelValue"])])]),(0,a.createElementVNode)("div",m,[(0,a.createElementVNode)("div",f,[y,(0,a.createVNode)(V,{modelValue:e.toolbar.offsetTime,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.toolbar.offsetTime=t}),modelModifiers:{number:!0},step:.5,attributes:{style:"text-align:right;width:2.5em;"},styles:{postfix:"s"}},null,8,["modelValue","step","attributes"])]),(0,a.createElementVNode)("div",g,[h,(0,a.createVNode)(V,{modelValue:e.AuiSettings.fontsize,"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.AuiSettings.fontsize=t}),modelModifiers:{number:!0},step:10,validate:function(e){return e>=50&&e<=180},attributes:{style:"text-align:right;width:2.5em;"},styles:{postfix:"%"}},null,8,["modelValue","validate","attributes"])]),(0,a.createElementVNode)("div",v,[b,(0,a.createVNode)(V,{modelValue:e.AuiSettings.speed,"onUpdate:modelValue":t[11]||(t[11]=function(t){return e.AuiSettings.speed=t}),modelModifiers:{number:!0},step:.5,validate:function(e){return e>=3&&e<=22},attributes:{style:"text-align:right;width:2.5em;"},styles:{postfix:"s"}},null,8,["modelValue","step","validate","attributes"])]),(0,a.createElementVNode)("div",k,[x,(0,a.createVNode)(V,{modelValue:e.AuiSettings.duration,"onUpdate:modelValue":t[12]||(t[12]=function(t){return e.AuiSettings.duration=t}),modelModifiers:{number:!0},step:.5,validate:function(e){return e>=3&&e<=22},attributes:{style:"text-align:right;width:2.5em;"},styles:{postfix:"s"}},null,8,["modelValue","step","validate","attributes"])])]),w])])}},43139:function(e,t,n){"use strict";e.exports=n.p+"img/default-cover.7ccf8463.png"}}]);